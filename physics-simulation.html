<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰©ç†å¼•æ“æ¨¡æ‹Ÿ - BDCGæ¨¡æ‹Ÿå™¨</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <style>
        :root {
            --primary-color: #3a0ca3;
            --secondary-color: #4361ee;
            --accent-color: #f72585;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --gray-color: #6c757d;
            --code-bg: #282c34;
            --card-bg: #ffffff;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --tech-art-color: #00b4d8;
            --animation-color: #ff9e00;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark-color);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* å¤´éƒ¨å¯¼èˆª */
        .subpage-header {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            background-color: rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }

        .back-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateX(-5px);
        }

        .subpage-title {
            text-align: center;
            flex-grow: 1;
        }

        .subpage-title h1 {
            font-size: 2rem;
            margin-bottom: 0.3rem;
        }

        .subpage-title p {
            opacity: 0.9;
            font-size: 1rem;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
        }

        .header-actions a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            background-color: rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }

        .header-actions a:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        /* ä¸»è¦å†…å®¹ */
        .main-content {
            padding: 3rem 0;
        }

        .page-section {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2.5rem;
        }

        .section-title {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent-color);
            display: inline-block;
        }

        .section-subtitle {
            color: var(--secondary-color);
            margin: 1.5rem 0 1rem;
            font-size: 1.3rem;
        }

        /* é¡¹ç›®æ¦‚è§ˆ */
        .project-overview {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }

        @media (max-width: 992px) {
            .project-overview {
                grid-template-columns: 1fr;
            }
        }

        .project-description p {
            margin-bottom: 1.2rem;
            color: var(--dark-color);
        }

        .project-meta {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
        }

        .meta-item {
            display: flex;
            justify-content: space-between;
            padding: 0.8rem 0;
            border-bottom: 1px solid #dee2e6;
        }

        .meta-item:last-child {
            border-bottom: none;
        }

        .meta-label {
            font-weight: 600;
            color: var(--primary-color);
        }

        .meta-value {
            color: var(--gray-color);
        }

        /* ä»£ç æ¼”ç¤º */
        .code-demo {
            background-color: var(--code-bg);
            border-radius: 8px;
            overflow: hidden;
            margin: 1.5rem 0;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 0.8rem 1.2rem;
            color: #abb2bf;
        }

        .code-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .copy-button {
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            color: #abb2bf;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            transition: var(--transition);
        }

        .copy-button:hover {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
        }

        pre {
            margin: 0;
            padding: 1.5rem;
            overflow-x: auto;
            line-height: 1.5;
        }

        code {
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
        }

        .hljs {
            background: transparent;
        }

        /* æŠ€æœ¯ç¾æœ¯æ¼”ç¤ºåŒºåŸŸ */
        .tech-art-section {
            background-color: rgba(0, 180, 216, 0.05);
            border-left: 4px solid var(--tech-art-color);
        }

        .tech-art-section .section-title {
            color: var(--tech-art-color);
        }

        .animation-section {
            background-color: rgba(255, 158, 0, 0.05);
            border-left: 4px solid var(--animation-color);
        }

        .animation-section .section-title {
            color: var(--animation-color);
        }

        /* ç‰©ç†æ¨¡æ‹Ÿæ¼”ç¤º */
        .physics-demo-container {
            position: relative;
            width: 100%;
            height: 400px;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 8px;
            overflow: hidden;
            margin: 1.5rem 0;
            border: 2px solid var(--secondary-color);
        }

        .demo-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .demo-button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .demo-button:hover {
            background-color: var(--primary-color);
            transform: translateY(-3px);
        }

        .demo-button.reset {
            background-color: var(--accent-color);
        }

        /* ç‰©ç†å¯¹è±¡æ ·å¼ */
        .physics-object {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            user-select: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: left 0.05s linear, top 0.05s linear;
        }

        .physics-object.platform {
            border-radius: 10px;
            background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
        }

        .physics-object.box {
            border-radius: 5px;
            background: linear-gradient(135deg, #ff9e00, #ff6f00);
        }

        /* æŠ€æœ¯ç¾æœ¯å±•ç¤º */
        .tech-art-showcase {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .tech-art-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }

        .tech-art-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .tech-art-visual {
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .tech-art-content {
            padding: 1.5rem;
        }

        .tech-art-content h4 {
            color: var(--tech-art-color);
            margin-bottom: 0.8rem;
        }

        .tech-art-content p {
            color: var(--gray-color);
            font-size: 0.95rem;
            margin-bottom: 1rem;
        }

        /* åŠ¨ç”»æ¼”ç¤º */
        .animation-demo {
            height: 300px;
            background-color: #1a1a2e;
            border-radius: 8px;
            margin: 1.5rem 0;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--animation-color);
        }

        .animation-object {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--animation-color), #ff6f00);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            user-select: none;
        }

        /* æ–‡ä»¶ç»“æ„ */
        .file-structure {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .file-tree {
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            line-height: 1.8;
        }

        .file-tree ul {
            list-style-type: none;
            padding-left: 1.5rem;
        }

        .file-tree li {
            position: relative;
            padding: 0.2rem 0;
        }

        .file-tree li:before {
            content: "ğŸ“";
            position: absolute;
            left: -1.2rem;
        }

        .file-tree .file:before {
            content: "ğŸ“„";
        }

        .file-tree .js-file:before {
            content: "ğŸ“œ";
        }

        .file-tree .shader-file:before {
            content: "ğŸ”®";
        }

        /* æ¡ˆä¾‹å±•ç¤º */
        .case-studies {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .case-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            transition: var(--transition);
            border-left: 4px solid var(--secondary-color);
        }

        .case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .case-card h4 {
            color: var(--primary-color);
            margin-bottom: 0.8rem;
        }

        .case-card p {
            color: var(--gray-color);
            font-size: 0.95rem;
            margin-bottom: 1rem;
        }

        .case-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .case-tag {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--secondary-color);
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .case-tag.tech-art {
            background-color: rgba(0, 180, 216, 0.1);
            color: var(--tech-art-color);
        }

        .case-tag.animation {
            background-color: rgba(255, 158, 0, 0.1);
            color: var(--animation-color);
        }

        /* ç›¸å…³èµ„æº */
        .resource-links {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .resource-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--secondary-color);
            text-decoration: none;
            padding: 0.7rem 1.2rem;
            background-color: rgba(67, 97, 238, 0.1);
            border-radius: 6px;
            transition: var(--transition);
        }

        .resource-link:hover {
            background-color: rgba(67, 97, 238, 0.2);
            transform: translateY(-3px);
        }

        /* é¡µé¢å¯¼èˆª */
        .page-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #dee2e6;
        }

        .nav-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-color);
            text-decoration: none;
            padding: 0.8rem 1.5rem;
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }

        .nav-button:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-3px);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .header-actions {
                justify-content: center;
            }
            
            .subpage-title h1 {
                font-size: 1.7rem;
            }
            
            .tech-art-showcase, .case-studies {
                grid-template-columns: 1fr;
            }
            
            .physics-demo-container, .animation-demo {
                height: 300px;
            }
            
            .page-navigation {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-button {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header class="subpage-header">
        <div class="container">
            <div class="header-content">
                <a href="../index.html" class="back-button">
                    <i class="fas fa-arrow-left"></i> è¿”å›ä¸»é¡µ
                </a>
                
                <div class="subpage-title">
                    <h1>ç‰©ç†å¼•æ“æ¨¡æ‹Ÿ</h1>
                    <p>2D/3Dç‰©ç†å¼•æ“å®ç°ä¸æŠ€æœ¯ç¾æœ¯åº”ç”¨</p>
                </div>
                
                <div class="header-actions">
                    <a href="#physics-demo"><i class="fas fa-cogs"></i> æ¼”ç¤º</a>
                    <a href="#tech-art"><i class="fas fa-palette"></i> æŠ€æœ¯ç¾æœ¯</a>
                    <a href="#animation"><i class="fas fa-film"></i> åŠ¨ç”»</a>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content container">
        <!-- é¡¹ç›®æ¦‚è§ˆ -->
        <section class="page-section">
            <h2 class="section-title">é¡¹ç›®æ¦‚è§ˆ</h2>
            
            <div class="project-overview">
                <div class="project-description">
                    <p>è¿™æ˜¯ä¸€ä¸ªåŸºäºBox2Dçš„2Dç‰©ç†å¼•æ“å®ç°ï¼Œä¸“ä¸ºæ¸¸æˆå¼€å‘è®¾è®¡ï¼ŒåŒ…å«å®Œæ•´çš„ç¢°æ’æ£€æµ‹ã€åˆšä½“åŠ¨åŠ›å­¦ã€å…³èŠ‚ç³»ç»Ÿå’Œç‰©ç†æè´¨ç³»ç»Ÿã€‚è¯¥å¼•æ“é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œæ€§èƒ½ä¼˜åŒ–è‰¯å¥½ï¼Œå¯è½»æ¾é›†æˆåˆ°ä¸åŒçš„æ¸¸æˆé¡¹ç›®ä¸­ã€‚</p>
                    
                    <p>é™¤äº†åŸºç¡€çš„ç‰©ç†æ¨¡æ‹Ÿï¼Œæœ¬é¡¹ç›®è¿˜ç‰¹åˆ«å…³æ³¨æŠ€æœ¯ç¾æœ¯åº”ç”¨ï¼ŒåŒ…æ‹¬GPUç²’å­ç³»ç»Ÿã€åŠ¨æ€ç€è‰²å™¨æ•ˆæœã€ç¨‹åºåŒ–åŠ¨ç”»å’Œç‰©ç†é©±åŠ¨çš„è§†è§‰åé¦ˆã€‚è¿™äº›æŠ€æœ¯ç¾æœ¯å…ƒç´ èƒ½å¤Ÿæå¤§æå‡æ¸¸æˆçš„è§†è§‰æ•ˆæœå’Œæ²‰æµ¸æ„Ÿã€‚</p>
                    
                    <p>æœ¬é¡µé¢å°†å±•ç¤ºç‰©ç†å¼•æ“çš„æ ¸å¿ƒä»£ç ã€æŠ€æœ¯ç¾æœ¯èµ„æºå’ŒåŠ¨ç”»æ¼”ç¤ºï¼Œä»¥åŠå¦‚ä½•å°†è¿™äº›æŠ€æœ¯åº”ç”¨äºå®é™…æ¸¸æˆå¼€å‘ä¸­ã€‚</p>
                </div>
                
                <div class="project-meta">
                    <div class="meta-item">
                        <span class="meta-label">æŠ€æœ¯æ ˆ:</span>
                        <span class="meta-value">TypeScript + WebGL</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">æ–‡ä»¶æ•°é‡:</span>
                        <span class="meta-value">15ä¸ª</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">æœ€åæ›´æ–°:</span>
                        <span class="meta-value">2023-07-10</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">å¤æ‚åº¦:</span>
                        <span class="meta-value">é«˜çº§</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">ä¾èµ–é¡¹:</span>
                        <span class="meta-value">æ— å¤–éƒ¨ä¾èµ–</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">è®¸å¯è¯:</span>
                        <span class="meta-value">MIT</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç‰©ç†å¼•æ“æ¼”ç¤º -->
        <section class="page-section" id="physics-demo">
            <h2 class="section-title">ç‰©ç†å¼•æ“æ¼”ç¤º</h2>
            
            <div class="physics-demo-container" id="physicsDemo">
                <!-- ç‰©ç†å¯¹è±¡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="demo-controls">
                <button class="demo-button" onclick="addBall()">
                    <i class="fas fa-plus-circle"></i> æ·»åŠ çƒä½“
                </button>
                <button class="demo-button" onclick="addBox()">
                    <i class="fas fa-square"></i> æ·»åŠ æ–¹å—
                </button>
                <button class="demo-button" onclick="toggleGravity()">
                    <i class="fas fa-weight-hanging"></i> åˆ‡æ¢é‡åŠ›
                </button>
                <button class="demo-button" onclick="applyExplosion()">
                    <i class="fas fa-bomb"></i> åº”ç”¨çˆ†ç‚¸åŠ›
                </button>
                <button class="demo-button reset" onclick="resetDemo()">
                    <i class="fas fa-redo"></i> é‡ç½®æ¼”ç¤º
                </button>
            </div>
            
            <p>è¿™ä¸ªæ¼”ç¤ºå±•ç¤ºäº†åŸºæœ¬çš„ç‰©ç†æ¨¡æ‹Ÿï¼ŒåŒ…æ‹¬é‡åŠ›ã€ç¢°æ’æ£€æµ‹ã€åˆšä½“åŠ¨åŠ›å­¦å’ŒåŠ›çš„åº”ç”¨ã€‚æ‚¨å¯ä»¥é€šè¿‡æŒ‰é’®æ·»åŠ ä¸åŒç±»å‹çš„ç‰©ç†å¯¹è±¡å¹¶è§‚å¯Ÿå®ƒä»¬çš„ç‰©ç†è¡Œä¸ºã€‚</p>
        </section>

        <!-- ä»£ç æ¼”ç¤º -->
        <section class="page-section">
            <h2 class="section-title">æ ¸å¿ƒä»£ç æ¼”ç¤º</h2>
            
            <h3 class="section-subtitle">ç‰©ç†å¼•æ“æ ¸å¿ƒ (PhysicsEngine.js)</h3>
            <div class="code-demo">
                <div class="code-header">
                    <div class="code-title">
                        <i class="fas fa-file-code"></i>
                        <span>game-scripts/physics-engine/PhysicsEngine.js</span>
                    </div>
                    <button class="copy-button" onclick="copyCode('code1')">
                        <i class="far fa-copy"></i> å¤åˆ¶ä»£ç 
                    </button>
                </div>
                <pre><code class="javascript" id="code1">/**
 * 2Dç‰©ç†å¼•æ“æ ¸å¿ƒ
 * åŸºäºBox2Dçš„ç®€åŒ–å®ç°ï¼ŒåŒ…å«ç¢°æ’æ£€æµ‹å’Œåˆšä½“åŠ¨åŠ›å­¦
 */
class PhysicsEngine {
    constructor(gravity = { x: 0, y: 9.8 }) {
        this.gravity = gravity;
        this.world = {
            bodies: [],
            joints: [],
            colliders: []
        };
        
        this.timeStep = 1 / 60; // 60 FPS
        this.velocityIterations = 6;
        this.positionIterations = 2;
        
        this.collisionCallbacks = new Map();
        
        console.log("ç‰©ç†å¼•æ“åˆå§‹åŒ–å®Œæˆ");
    }
    
    /**
     * åˆ›å»ºåˆšä½“
     */
    createBody(position, bodyType = 'dynamic', options = {}) {
        const body = {
            id: `body_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
            position: { ...position },
            velocity: { x: 0, y: 0 },
            angularVelocity: 0,
            rotation: 0,
            bodyType: bodyType, // 'static', 'dynamic', 'kinematic'
            mass: options.mass || 1,
            inertia: options.inertia || 1,
            restitution: options.restitution || 0.2, // å¼¹æ€§ç³»æ•°
            friction: options.friction || 0.3, // æ‘©æ“¦ç³»æ•°
            shape: options.shape || 'circle',
            shapeData: options.shapeData || { radius: 20 },
            isAwake: true,
            userData: options.userData || null
        };
        
        // è®¡ç®—é€†è´¨é‡å’Œé€†æƒ¯æ€§
        body.invMass = body.mass > 0 ? 1 / body.mass : 0;
        body.invInertia = body.inertia > 0 ? 1 / body.inertia : 0;
        
        this.world.bodies.push(body);
        return body;
    }
    
    /**
     * åº”ç”¨åŠ›åˆ°åˆšä½“
     */
    applyForce(body, force, point = null) {
        if (body.bodyType !== 'dynamic') return;
        
        // çº¿æ€§åŠ›
        body.velocity.x += force.x * body.invMass * this.timeStep;
        body.velocity.y += force.y * body.invMass * this.timeStep;
        
        // å¦‚æœç‚¹ä¸ä¸ºç©ºï¼Œè®¡ç®—æ‰­çŸ©
        if (point) {
            const r = {
                x: point.x - body.position.x,
                y: point.y - body.position.y
            };
            
            // æ‰­çŸ© = r Ã— F
            const torque = r.x * force.y - r.y * force.x;
            body.angularVelocity += torque * body.invInertia * this.timeStep;
        }
        
        body.isAwake = true;
    }
    
    /**
     * åº”ç”¨å†²é‡åˆ°åˆšä½“
     */
    applyImpulse(body, impulse, point = null) {
        if (body.bodyType !== 'dynamic') return;
        
        // çº¿æ€§å†²é‡
        body.velocity.x += impulse.x * body.invMass;
        body.velocity.y += impulse.y * body.invMass;
        
        // å¦‚æœç‚¹ä¸ä¸ºç©ºï¼Œè®¡ç®—è§’å†²é‡
        if (point) {
            const r = {
                x: point.x - body.position.x,
                y: point.y - body.position.y
            };
            
            // è§’å†²é‡ = r Ã— impulse
            const angularImpulse = r.x * impulse.y - r.y * impulse.x;
            body.angularVelocity += angularImpulse * body.invInertia;
        }
        
        body.isAwake = true;
    }
    
    /**
     * æ›´æ–°ç‰©ç†ä¸–ç•Œ
     */
    update(deltaTime) {
        const dt = Math.min(deltaTime, 0.1); // é™åˆ¶æœ€å¤§æ—¶é—´æ­¥é•¿
        
        // åº”ç”¨é‡åŠ›
        this.world.bodies.forEach(body => {
            if (body.bodyType === 'dynamic' && body.isAwake) {
                body.velocity.x += this.gravity.x * dt;
                body.velocity.y += this.gravity.y * dt;
            }
        });
        
        // ç§¯åˆ†ä½ç½®
        this.world.bodies.forEach(body => {
            if (body.bodyType !== 'static' && body.isAwake) {
                body.position.x += body.velocity.x * dt;
                body.position.y += body.velocity.y * dt;
                body.rotation += body.angularVelocity * dt;
                
                // åº”ç”¨é˜»å°¼
                body.velocity.x *= 0.99;
                body.velocity.y *= 0.99;
                body.angularVelocity *= 0.99;
                
                // å¦‚æœé€Ÿåº¦éå¸¸å°ï¼Œè®©ç‰©ä½“è¿›å…¥ç¡çœ çŠ¶æ€
                const speedSq = body.velocity.x * body.velocity.x + 
                              body.velocity.y * body.velocity.y;
                if (speedSq < 0.01 && Math.abs(body.angularVelocity) < 0.01) {
                    body.isAwake = false;
                }
            }
        });
        
        // ç¢°æ’æ£€æµ‹å’Œè§£å†³
        this.detectCollisions();
        
        // è§£å†³çº¦æŸ
        this.solveConstraints();
    }
    
    /**
     * ç¢°æ’æ£€æµ‹
     */
    detectCollisions() {
        const bodies = this.world.bodies.filter(b => b.isAwake);
        
        for (let i = 0; i < bodies.length; i++) {
            for (let j = i + 1; j < bodies.length; j++) {
                const bodyA = bodies[i];
                const bodyB = bodies[j];
                
                // è·³è¿‡é™æ€-é™æ€ç¢°æ’æ£€æµ‹
                if (bodyA.bodyType === 'static' && bodyB.bodyType === 'static') {
                    continue;
                }
                
                const collision = this.checkCollision(bodyA, bodyB);
                
                if (collision.collided) {
                    this.resolveCollision(bodyA, bodyB, collision);
                    
                    // è§¦å‘ç¢°æ’å›è°ƒ
                    this.triggerCollisionCallbacks(bodyA, bodyB, collision);
                }
            }
        }
    }
    
    /**
     * æ£€æŸ¥ä¸¤ä¸ªåˆšä½“æ˜¯å¦ç¢°æ’
     */
    checkCollision(bodyA, bodyB) {
        // ç®€åŒ–ç‰ˆç¢°æ’æ£€æµ‹ï¼Œå®é™…å®ç°éœ€è¦å¤„ç†ä¸åŒå½¢çŠ¶
        const dx = bodyB.position.x - bodyA.position.x;
        const dy = bodyB.position.y - bodyA.position.y;
        
        let distance;
        
        if (bodyA.shape === 'circle' && bodyB.shape === 'circle') {
            const rA = bodyA.shapeData.radius;
            const rB = bodyB.shapeData.radius;
            const distanceSq = dx * dx + dy * dy;
            const radiusSum = rA + rB;
            
            distance = Math.sqrt(distanceSq);
            
            return {
                collided: distance < radiusSum,
                normal: { x: dx / distance, y: dy / distance },
                depth: radiusSum - distance,
                point: {
                    x: bodyA.position.x + (dx / distance) * rA,
                    y: bodyA.position.y + (dy / distance) * rA
                }
            };
        }
        
        // å…¶ä»–å½¢çŠ¶æ£€æµ‹...
        return { collided: false };
    }
    
    /**
     * è§£å†³ç¢°æ’
     */
    resolveCollision(bodyA, bodyB, collision) {
        const normal = collision.normal;
        const depth = collision.depth;
        
        // è®¡ç®—ç›¸å¯¹é€Ÿåº¦
        const rv = {
            x: bodyB.velocity.x - bodyA.velocity.x,
            y: bodyB.velocity.y - bodyA.velocity.y
        };
        
        // è®¡ç®—ç›¸å¯¹é€Ÿåº¦åœ¨æ³•çº¿ä¸Šçš„æŠ•å½±
        const velAlongNormal = rv.x * normal.x + rv.y * normal.y;
        
        // å¦‚æœç‰©ä½“æ­£åœ¨åˆ†ç¦»ï¼Œä¸éœ€è¦è§£å†³ç¢°æ’
        if (velAlongNormal > 0) return;
        
        // è®¡ç®—æ¢å¤ç³»æ•°
        const e = Math.min(bodyA.restitution, bodyB.restitution);
        
        // è®¡ç®—å†²é‡æ ‡é‡
        let j = -(1 + e) * velAlongNormal;
        j /= bodyA.invMass + bodyB.invMass;
        
        // åº”ç”¨å†²é‡
        const impulse = {
            x: j * normal.x,
            y: j * normal.y
        };
        
        bodyA.velocity.x -= impulse.x * bodyA.invMass;
        bodyA.velocity.y -= impulse.y * bodyA.invMass;
        bodyB.velocity.x += impulse.x * bodyB.invMass;
        bodyB.velocity.y += impulse.y * bodyB.invMass;
        
        // ä½ç½®ä¿®æ­£ï¼ˆé˜²æ­¢ç‰©ä½“ç›¸äº’ç©¿é€ï¼‰
        const percent = 0.2; // é€šå¸¸ä¸º0.2åˆ°0.8
        const slop = 0.01; // é€šå¸¸ä¸º0.01åˆ°0.1
        const correction = Math.max(depth - slop, 0) / (bodyA.invMass + bodyB.invMass) * percent;
        
        const correctionVec = {
            x: correction * normal.x,
            y: correction * normal.y
        };
        
        bodyA.position.x -= correctionVec.x * bodyA.invMass;
        bodyA.position.y -= correctionVec.y * bodyA.invMass;
        bodyB.position.x += correctionVec.x * bodyB.invMass;
        bodyB.position.y += correctionVec.y * bodyB.invMass;
        
        // å”¤é†’ç‰©ä½“
        bodyA.isAwake = true;
        bodyB.isAwake = true;
    }
}</code></pre>
            </div>
        </section>

        <!-- æŠ€æœ¯ç¾æœ¯å±•ç¤º -->
        <section class="page-section tech-art-section" id="tech-art">
            <h2 class="section-title">æŠ€æœ¯ç¾æœ¯èµ„æºä¸åº”ç”¨</h2>
            
            <p>æŠ€æœ¯ç¾æœ¯(Tech Art)æ˜¯è¿æ¥ç¾æœ¯ä¸ç¼–ç¨‹çš„æ¡¥æ¢ï¼Œä¸“æ³¨äºé€šè¿‡æŠ€æœ¯æ‰‹æ®µå®ç°é«˜è´¨é‡çš„è§†è§‰æ•ˆæœã€‚ä»¥ä¸‹æ˜¯ç‰©ç†å¼•æ“ç›¸å…³çš„æŠ€æœ¯ç¾æœ¯èµ„æºå’Œåº”ç”¨æ¡ˆä¾‹ã€‚</p>
            
            <div class="tech-art-showcase">
                <div class="tech-art-card">
                    <div class="tech-art-visual" id="particleDemo1" style="background: linear-gradient(135deg, #1a1a2e, #16213e);">
                        <!-- ç²’å­æ•ˆæœå°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                    </div>
                    <div class="tech-art-content">
                        <h4>GPUç²’å­ç³»ç»Ÿ</h4>
                        <p>åŸºäºWebGLçš„GPUç²’å­ç³»ç»Ÿï¼Œæ”¯æŒæ•°ç™¾ä¸‡ç²’å­çš„å®æ—¶æ¸²æŸ“ã€‚ç²’å­å¯ä»¥å—ç‰©ç†åŠ›åœºå½±å“ï¼Œå®ç°ç«ç„°ã€çƒŸé›¾ã€é­”æ³•ç­‰ç‰¹æ•ˆã€‚</p>
                        <button class="demo-button" style="padding: 0.5rem 1rem; font-size: 0.9rem;" onclick="startParticleDemo('particleDemo1')">
                            <i class="fas fa-play"></i> æ¼”ç¤ºæ•ˆæœ
                        </button>
                    </div>
                </div>
                
                <div class="tech-art-card">
                    <div class="tech-art-visual" style="background: linear-gradient(135deg, #0f3460, #533483); display: flex; align-items: center; justify-content: center;">
                        <div style="width: 120px; height: 120px; border-radius: 50%; background: conic-gradient(from 0deg, #ff9a9e, #fad0c4, #fad0c4, #a1c4fd, #c2e9fb, #ff9a9e); animation: rotate 3s linear infinite;"></div>
                    </div>
                    <div class="tech-art-content">
                        <h4>åŠ¨æ€ç€è‰²å™¨</h4>
                        <p>ä½¿ç”¨GLSLç¼–å†™çš„å®æ—¶ç€è‰²å™¨ï¼Œå®ç°æ°´é¢åå°„ã€æè´¨æŠ˜å°„ã€åŠ¨æ€å…‰ç…§å’ŒåæœŸå¤„ç†æ•ˆæœã€‚æ‰€æœ‰æ•ˆæœéƒ½åŸºäºç‰©ç†æ¸²æŸ“(PBR)åŸåˆ™ã€‚</p>
                    </div>
                </div>
                
                <div class="tech-art-card">
                    <div class="tech-art-visual" style="background: linear-gradient(135deg, #1e3c72, #2a5298); display: flex; align-items: center; justify-content: center;">
                        <div style="width: 140px; height: 140px; position: relative;">
                            <div style="width: 100%; height: 100%; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #ff7e5f, #feb47b); box-shadow: 0 0 30px rgba(255, 126, 95, 0.7);"></div>
                        </div>
                    </div>
                    <div class="tech-art-content">
                        <h4>ç¨‹åºåŒ–çº¹ç†ç”Ÿæˆ</h4>
                        <p>é€šè¿‡ç®—æ³•å®æ—¶ç”Ÿæˆçº¹ç†ï¼Œå‡å°‘ç¾æœ¯èµ„æºå ç”¨ã€‚æ”¯æŒå™ªå£°å‡½æ•°ã€åˆ†å½¢ç®—æ³•å’Œç‰©ç†æ¨¡æ‹Ÿæ¥åˆ›å»ºè‡ªç„¶çº¹ç†ï¼ˆå¦‚äº‘å±‚ã€åœ°å½¢ã€ç«ç„°ï¼‰ã€‚</p>
                    </div>
                </div>
            </div>
            
            <h3 class="section-subtitle">ç€è‰²å™¨ä»£ç ç¤ºä¾‹ (water.frag)</h3>
            <div class="code-demo">
                <div class="code-header">
                    <div class="code-title">
                        <i class="fas fa-file-code"></i>
                        <span>tech-art/shaders/water.frag</span>
                    </div>
                    <button class="copy-button" onclick="copyCode('code2')">
                        <i class="far fa-copy"></i> å¤åˆ¶ä»£ç 
                    </button>
                </div>
                <pre><code class="glsl" id="code2">/**
 * æ°´é¢ç€è‰²å™¨ - ç‰‡æ®µç€è‰²å™¨
 * å®ç°åŠ¨æ€æ°´é¢æ•ˆæœï¼ŒåŒ…æ‹¬åå°„ã€æŠ˜å°„å’Œæ³¢çº¹
 */
precision mediump float;

uniform float uTime;
uniform vec2 uResolution;
uniform sampler2D uReflectionTexture;
uniform sampler2D uRefractionTexture;
uniform sampler2D uNormalMap;

varying vec2 vUv;
varying vec3 vPosition;

void main() {
    // è®¡ç®—UVåæ ‡ï¼Œè€ƒè™‘æ—¶é—´åç§»åˆ›å»ºåŠ¨ç”»æ•ˆæœ
    vec2 uv = vUv;
    uv.x += sin(uTime * 0.5 + vPosition.y * 2.0) * 0.02;
    uv.y += cos(uTime * 0.3 + vPosition.x * 2.0) * 0.01;
    
    // ä»æ³•çº¿è´´å›¾è·å–æ³•çº¿å‘é‡
    vec3 normal = texture2D(uNormalMap, uv * 2.0).rgb * 2.0 - 1.0;
    
    // æ·»åŠ åŸºäºæ—¶é—´çš„åŠ¨æ€æ³¢çº¹
    float waveStrength = 0.1;
    float waveSpeed = 1.5;
    float waveFrequency = 10.0;
    
    vec2 waveOffset = vec2(
        sin(uTime * waveSpeed + uv.y * waveFrequency) * waveStrength,
        cos(uTime * waveSpeed + uv.x * waveFrequency) * waveStrength
    );
    
    // è®¡ç®—åå°„å’ŒæŠ˜å°„UV
    vec2 reflectionUV = vec2(uv.x, 1.0 - uv.y) + normal.xy * 0.02 + waveOffset * 0.5;
    vec2 refractionUV = uv + normal.xy * 0.01 + waveOffset;
    
    // é‡‡æ ·åå°„å’ŒæŠ˜å°„çº¹ç†
    vec4 reflectionColor = texture2D(uReflectionTexture, reflectionUV);
    vec4 refractionColor = texture2D(uRefractionTexture, refractionUV);
    
    // è®¡ç®—è²æ¶…å°”æ•ˆåº”ï¼ˆè§†è§’ç›¸å…³çš„åå°„/æŠ˜å°„æ··åˆï¼‰
    vec3 viewDir = normalize(vPosition);
    float fresnel = pow(1.0 - dot(viewDir, normal), 3.0);
    fresnel = clamp(fresnel * 2.0, 0.2, 0.8);
    
    // æ··åˆåå°„å’ŒæŠ˜å°„é¢œè‰²
    vec4 waterColor = mix(refractionColor, reflectionColor, fresnel);
    
    // æ·»åŠ æ°´çš„åŸºç¡€é¢œè‰²
    vec4 baseWaterColor = vec4(0.1, 0.3, 0.5, 0.8);
    waterColor = mix(waterColor, baseWaterColor, 0.3);
    
    // æ·»åŠ é«˜å…‰åå°„
    vec3 lightDir = normalize(vec3(0.5, 1.0, 0.3));
    float specular = pow(max(dot(reflect(-lightDir, normal), viewDir), 0.0), 32.0);
    waterColor.rgb += vec3(0.8, 0.9, 1.0) * specular * 0.5;
    
    // æ·»åŠ è¾¹ç¼˜æ³¡æ²«æ•ˆæœ
    float foam = sin(uTime * 2.0 + uv.x * 20.0) * 0.5 + 0.5;
    foam *= sin(uTime * 1.5 + uv.y * 15.0) * 0.5 + 0.5;
    foam = pow(foam, 3.0) * 0.1;
    
    // é è¿‘å²¸è¾¹çš„åœ°æ–¹å¢åŠ æ³¡æ²«
    float shoreDistance = length(vUv - vec2(0.5));
    foam *= (1.0 - shoreDistance * 2.0);
    foam = clamp(foam, 0.0, 0.2);
    
    waterColor.rgb += vec3(1.0) * foam;
    
    // æœ€ç»ˆè¾“å‡º
    gl_FragColor = waterColor;
}</code></pre>
            </div>
        </section>

        <!-- åŠ¨ç”»æ¼”ç¤º -->
        <section class="page-section animation-section" id="animation">
            <h2 class="section-title">ç‰©ç†é©±åŠ¨åŠ¨ç”»æ¼”ç¤º</h2>
            
            <p>ç‰©ç†é©±åŠ¨çš„åŠ¨ç”»ä½¿ç”¨ç‰©ç†å¼•æ“æ¥è®¡ç®—ç‰©ä½“çš„è¿åŠ¨ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„å…³é”®å¸§åŠ¨ç”»ã€‚è¿™ç§æ–¹æ³•å¯ä»¥åˆ›å»ºæ›´åŠ è‡ªç„¶å’Œäº¤äº’æ€§å¼ºçš„åŠ¨ç”»æ•ˆæœã€‚</p>
            
            <div class="animation-demo" id="animationDemo">
                <!-- åŠ¨ç”»å¯¹è±¡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="demo-controls">
                <button class="demo-button" onclick="startAnimationDemo()" style="background-color: var(--animation-color);">
                    <i class="fas fa-play"></i> å¼€å§‹åŠ¨ç”»
                </button>
                <button class="demo-button" onclick="addRagdoll()">
                    <i class="fas fa-user"></i> æ·»åŠ å¸ƒå¨ƒå¨ƒ
                </button>
                <button class="demo-button" onclick="addSoftBody()">
                    <i class="fas fa-cloud"></i> æ·»åŠ è½¯ä½“
                </button>
                <button class="demo-button reset" onclick="resetAnimationDemo()">
                    <i class="fas fa-redo"></i> é‡ç½®åŠ¨ç”»
                </button>
            </div>
            
            <h3 class="section-subtitle">å¸ƒå¨ƒå¨ƒç³»ç»Ÿ (RagdollSystem.js)</h3>
            <div class="code-demo">
                <div class="code-header">
                    <div class="code-title">
                        <i class="fas fa-file-code"></i>
                        <span>game-scripts/physics-engine/RagdollSystem.js</span>
                    </div>
                    <button class="copy-button" onclick="copyCode('code3')">
                        <i class="far fa-copy"></i> å¤åˆ¶ä»£ç 
                    </button>
                </div>
                <pre><code class="javascript" id="code3">/**
 * å¸ƒå¨ƒå¨ƒç‰©ç†ç³»ç»Ÿ
 * ç”¨äºè§’è‰²æ­»äº¡ã€è¢«å‡»é£ç­‰ç‰©ç†åŠ¨ç”»
 */
class RagdollSystem {
    constructor(physicsEngine) {
        this.physicsEngine = physicsEngine;
        this.ragdolls = new Map();
    }
    
    /**
     * åˆ›å»ºå¸ƒå¨ƒå¨ƒ
     */
    createRagdoll(position, config = {}) {
        const ragdollId = `ragdoll_${Date.now()}`;
        const parts = [];
        
        // èº«ä½“å„éƒ¨åˆ†é…ç½®
        const bodyParts = [
            { name: 'head', shape: 'circle', radius: 15, offset: { x: 0, y: -60 } },
            { name: 'torso', shape: 'box', width: 30, height: 50, offset: { x: 0, y: -25 } },
            { name: 'leftArm', shape: 'box', width: 12, height: 35, offset: { x: -25, y: -40 } },
            { name: 'rightArm', shape: 'box', width: 12, height: 35, offset: { x: 25, y: -40 } },
            { name: 'leftLeg', shape: 'box', width: 15, height: 40, offset: { x: -12, y: 20 } },
            { name: 'rightLeg', shape: 'box', width: 15, height: 40, offset: { x: 12, y: 20 } }
        ];
        
        // åˆ›å»ºèº«ä½“å„éƒ¨åˆ†
        bodyParts.forEach(part => {
            const partPosition = {
                x: position.x + part.offset.x,
                y: position.y + part.offset.y
            };
            
            const shapeData = part.shape === 'circle' 
                ? { radius: part.radius } 
                : { width: part.width, height: part.height };
            
            const body = this.physicsEngine.createBody(
                partPosition,
                'dynamic',
                {
                    shape: part.shape,
                    shapeData: shapeData,
                    mass: part.name === 'head' ? 3 : 5,
                    restitution: 0.1,
                    friction: 0.7,
                    userData: { type: 'ragdoll', part: part.name }
                }
            );
            
            parts.push({
                name: part.name,
                body: body
            });
        });
        
        // åˆ›å»ºå…³èŠ‚è¿æ¥èº«ä½“å„éƒ¨åˆ†
        const joints = [];
        
        // å¤´éƒ¨è¿æ¥åˆ°èº¯å¹²
        const head = parts.find(p => p.name === 'head').body;
        const torso = parts.find(p => p.name === 'torso').body;
        joints.push(this.createJoint(head, torso, { x: 0, y: 10 }, { x: 0, y: -25 }));
        
        // æ‰‹è‡‚è¿æ¥åˆ°èº¯å¹²
        const leftArm = parts.find(p => p.name === 'leftArm').body;
        joints.push(this.createJoint(torso, leftArm, { x: -15, y: -20 }, { x: 0, y: -15 }));
        
        const rightArm = parts.find(p => p.name === 'rightArm').body;
        joints.push(this.createJoint(torso, rightArm, { x: 15, y: -20 }, { x: 0, y: -15 }));
        
        // è…¿éƒ¨è¿æ¥åˆ°èº¯å¹²
        const leftLeg = parts.find(p => p.name === 'leftLeg').body;
        joints.push(this.createJoint(torso, leftLeg, { x: -12, y: 25 }, { x: 0, y: -20 }));
        
        const rightLeg = parts.find(p => p.name === 'rightLeg').body;
        joints.push(this.createJoint(torso, rightLeg, { x: 12, y: 25 }, { x: 0, y: -20 }));
        
        // ä¿å­˜å¸ƒå¨ƒå¨ƒ
        this.ragdolls.set(ragdollId, {
            id: ragdollId,
            parts: parts,
            joints: joints,
            isActive: true,
            createdAt: Date.now()
        });
        
        return ragdollId;
    }
    
    /**
     * åˆ›å»ºå…³èŠ‚
     */
    createJoint(bodyA, bodyB, anchorA, anchorB) {
        const joint = {
            bodyA: bodyA,
            bodyB: bodyB,
            anchorA: anchorA,
            anchorB: anchorB,
            type: 'revolute', // æ—‹è½¬å…³èŠ‚
            limits: { min: -Math.PI / 4, max: Math.PI / 4 },
            stiffness: 0.9,
            damping: 0.5
        };
        
        this.physicsEngine.world.joints.push(joint);
        return joint;
    }
    
    /**
     * å¯¹å¸ƒå¨ƒå¨ƒåº”ç”¨åŠ›
     */
    applyForceToRagdoll(ragdollId, force, point = null) {
        const ragdoll = this.ragdolls.get(ragdollId);
        if (!ragdoll || !ragdoll.isActive) return;
        
        // å¯¹æ¯ä¸ªéƒ¨åˆ†åº”ç”¨åŠ›
        ragdoll.parts.forEach(part => {
            this.physicsEngine.applyForce(part.body, force, point);
        });
    }
    
    /**
     * æ›´æ–°å¸ƒå¨ƒå¨ƒç³»ç»Ÿ
     */
    update(deltaTime) {
        // æ¸…ç†è¿‡æœŸçš„å¸ƒå¨ƒå¨ƒ
        const now = Date.now();
        const maxLifetime = 30000; // 30ç§’
        
        this.ragdolls.forEach((ragdoll, id) => {
            if (now - ragdoll.createdAt > maxLifetime) {
                this.destroyRagdoll(id);
            }
        });
    }
    
    /**
     * é”€æ¯å¸ƒå¨ƒå¨ƒ
     */
    destroyRagdoll(ragdollId) {
        const ragdoll = this.ragdolls.get(ragdollId);
        if (!ragdoll) return;
        
        // ä»ç‰©ç†ä¸–ç•Œä¸­ç§»é™¤èº«ä½“å’Œå…³èŠ‚
        ragdoll.parts.forEach(part => {
            const index = this.physicsEngine.world.bodies.indexOf(part.body);
            if (index > -1) {
                this.physicsEngine.world.bodies.splice(index, 1);
            }
        });
        
        ragdoll.joints.forEach(joint => {
            const index = this.physicsEngine.world.joints.indexOf(joint);
            if (index > -1) {
                this.physicsEngine.world.joints.splice(index, 1);
            }
        });
        
        // ä»å¸ƒå¨ƒå¨ƒç³»ç»Ÿä¸­ç§»é™¤
        this.ragdolls.delete(ragdollId);
        
        console.log(`å¸ƒå¨ƒå¨ƒ ${ragdollId} å·²é”€æ¯`);
    }
}</code></pre>
            </div>
        </section>

        <!-- æ–‡ä»¶ç»“æ„ -->
        <section class="page-section" id="file-structure">
            <h2 class="section-title">æ–‡ä»¶ç»“æ„</h2>
            
            <div class="file-structure">
                <div class="file-tree">
                    <ul>
                        <li>game-scripts/physics-engine/
                            <ul>
                                <li class="js-file">PhysicsEngine.js (ç‰©ç†å¼•æ“æ ¸å¿ƒ)</li>
                                <li class="js-file">CollisionDetection.js (ç¢°æ’æ£€æµ‹)</li>
                                <li class="js-file">RagdollSystem.js (å¸ƒå¨ƒå¨ƒç³»ç»Ÿ)</li>
                                <li class="js-file">SoftBodySystem.js (è½¯ä½“ç‰©ç†)</li>
                                <li class="js-file">FluidSimulation.js (æµä½“æ¨¡æ‹Ÿ)</li>
                                <li class="js-file">ConstraintSolver.js (çº¦æŸæ±‚è§£å™¨)</li>
                                <li class="js-file">BroadPhase.js (å¹¿ç›¸ç¢°æ’æ£€æµ‹)</li>
                                <li class="js-file">NarrowPhase.js (çª„ç›¸ç¢°æ’æ£€æµ‹)</li>
                                <li class="js-file">PhysicsMaterial.js (ç‰©ç†æè´¨)</li>
                                <li class="js-file">ForceGenerator.js (åŠ›åœºç”Ÿæˆå™¨)</li>
                            </ul>
                        </li>
                        <li>tech-art/
                            <ul>
                                <li class="shader-file">water.frag (æ°´é¢ç€è‰²å™¨)</li>
                                <li class="shader-file">particle.vert (ç²’å­é¡¶ç‚¹ç€è‰²å™¨)</li>
                                <li class="shader-file">toon.frag (å¡é€šç€è‰²å™¨)</li>
                                <li class="js-file">ParticleSystem.js (ç²’å­ç³»ç»Ÿ)</li>
                                <li class="js-file">ShaderManager.js (ç€è‰²å™¨ç®¡ç†å™¨)</li>
                                <li class="json-file">material-library.json (æè´¨åº“)</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
            
            <p>ç‰©ç†å¼•æ“é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼Œå°†æ ¸å¿ƒç‰©ç†æ¨¡æ‹Ÿã€ç¢°æ’æ£€æµ‹ã€çº¦æŸæ±‚è§£ç­‰æ¨¡å—åˆ†ç¦»ã€‚æŠ€æœ¯ç¾æœ¯èµ„æºä¸ç‰©ç†å¼•æ“ç´§å¯†é›†æˆï¼Œå®ç°ç‰©ç†é©±åŠ¨çš„è§†è§‰æ•ˆæœã€‚</p>
        </section>

        <!-- æ¡ˆä¾‹ç ”ç©¶ -->
        <section class="page-section" id="case-studies">
            <h2 class="section-title">æ¡ˆä¾‹åˆ†æä¸ä½¿ç”¨ç¤ºä¾‹</h2>
            
            <div class="case-studies">
                <div class="case-card">
                    <h4>å¹³å°æ¸¸æˆç‰©ç†</h4>
                    <p>å®ç°å¹³å°æ¸¸æˆä¸­çš„è§’è‰²ç§»åŠ¨ã€è·³è·ƒã€å¢™å£æ»‘åŠ¨å’Œæ–œå¡å¤„ç†ã€‚åŒ…å«å®Œæ•´çš„è§’è‰²æ§åˆ¶å™¨å’Œå¹³å°äº¤äº’ç³»ç»Ÿã€‚</p>
                    <div class="case-tags">
                        <span class="case-tag">2Dç‰©ç†</span>
                        <span class="case-tag">å¹³å°æ¸¸æˆ</span>
                        <span class="case-tag">ä¸­çº§</span>
                    </div>
                </div>
                
                <div class="case-card">
                    <h4>ç ´åç³»ç»Ÿ</h4>
                    <p>å®ç°å¯ç ´åçš„ç¯å¢ƒç‰©ä½“ï¼Œæ”¯æŒç¢è£‚ã€å˜å½¢å’Œç‰©ç†æ¨¡æ‹Ÿç¢ç‰‡ã€‚ä½¿ç”¨æœ‰é™å…ƒåˆ†æç®€åŒ–ç‰ˆè®¡ç®—ç ´åæ•ˆæœã€‚</p>
                    <div class="case-tags">
                        <span class="case-tag">ç ´åç‰©ç†</span>
                        <span class="case-tag tech-art">æŠ€æœ¯ç¾æœ¯</span>
                        <span class="case-tag">é«˜çº§</span>
                    </div>
                </div>
                
                <div class="case-card">
                    <h4>å¸ƒæ–™æ¨¡æ‹Ÿ</h4>
                    <p>åŸºäºè´¨ç‚¹-å¼¹ç°§æ¨¡å‹çš„å¸ƒæ–™æ¨¡æ‹Ÿï¼Œæ”¯æŒé£åœºã€ç¢°æ’å’Œæ’•è£‚æ•ˆæœã€‚å¯ç”¨äºæ——å¸œã€è§’è‰²æœè£…ç­‰ã€‚</p>
                    <div class="case-tags">
                        <span class="case-tag">è½¯ä½“ç‰©ç†</span>
                        <span class="case-tag animation">åŠ¨ç”»</span>
                        <span class="case-tag">é«˜çº§</span>
                    </div>
                </div>
                
                <div class="case-card">
                    <h4>è½¦è¾†ç‰©ç†</h4>
                    <p>å®ç°åŸºäºç‰©ç†çš„è½¦è¾†ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ‚¬æŒ‚ç³»ç»Ÿã€è½®èƒæ‘©æ“¦ã€è½¬å‘å’ŒåŠ é€Ÿã€‚æ”¯æŒä¸åŒåœ°å½¢å’Œé©¾é©¶æ¡ä»¶ã€‚</p>
                    <div class="case-tags">
                        <span class="case-tag">è½¦è¾†ç‰©ç†</span>
                        <span class="case-tag">ä¸­çº§</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç›¸å…³èµ„æº -->
        <section class="page-section">
            <h2 class="section-title">ç›¸å…³èµ„æºä¸é“¾æ¥</h2>
            
            <p>ä»¥ä¸‹æ˜¯ä¸ç‰©ç†å¼•æ“å’ŒæŠ€æœ¯ç¾æœ¯ç›¸å…³çš„èµ„æºå’Œæ–‡æ¡£é“¾æ¥ï¼š</p>
            
            <div class="resource-links">
                <a href="https://github.com/yourusername/physics-engine" class="resource-link" target="_blank">
                    <i class="fab fa-github"></i> æŸ¥çœ‹å®Œæ•´æºä»£ç 
                </a>
                
                <a href="../game-scripts/rpg-system.html" class="resource-link">
                    <i class="fas fa-fist-raised"></i> RPGæˆ˜æ–—ç³»ç»Ÿ
                </a>
                
                <a href="../art-resources/visual-effects.html" class="resource-link">
                    <i class="fas fa-fire"></i> è§†è§‰ç‰¹æ•ˆèµ„æº
                </a>
                
                <a href="https://threejs.org" class="resource-link" target="_blank">
                    <i class="fas fa-cube"></i> Three.js 3Dåº“
                </a>
                
                <a href="https://www.shadertoy.com" class="resource-link" target="_blank">
                    <i class="fas fa-palette"></i> Shadertoy ç€è‰²å™¨ç¤¾åŒº
                </a>
            </div>
        </section>

        <!-- é¡µé¢å¯¼èˆª -->
        <div class="page-navigation">
            <a href="../index.html" class="nav-button">
                <i class="fas fa-home"></i> è¿”å›ä¸»é¡µé¢
            </a>
            
            <a href="inventory-system.html" class="nav-button">
                ä¸‹ä¸€ä¸ª: èƒŒåŒ…ä¸ç‰©å“ç³»ç»Ÿ <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>
        // åˆå§‹åŒ–ä»£ç é«˜äº®
        document.addEventListener('DOMContentLoaded', function() {
            hljs.highlightAll();
            
            // åˆå§‹åŒ–ç‰©ç†æ¼”ç¤º
            initPhysicsDemo();
            initAnimationDemo();
        });
        
        /* ==================== ç‰©ç†æ¼”ç¤ºåŠŸèƒ½ ==================== */
        let physicsObjects = [];
        let platforms = [];
        let gravityEnabled = true;
        let animationId = null;
        
        function initPhysicsDemo() {
            const container = document.getElementById('physicsDemo');
            
            // åˆ›å»ºå¹³å°
            const platformWidth = container.offsetWidth - 100;
            
            // åº•éƒ¨å¹³å°
            platforms.push({
                element: createPhysicsElement('platform', platformWidth, 30, container.offsetWidth/2 - platformWidth/2, container.offsetHeight - 40),
                type: 'platform',
                width: platformWidth,
                height: 30,
                x: container.offsetWidth/2 - platformWidth/2,
                y: container.offsetHeight - 40
            });
            
            // å·¦ä¾§å¹³å°
            platforms.push({
                element: createPhysicsElement('platform', 200, 20, 50, container.offsetHeight - 150),
                type: 'platform',
                width: 200,
                height: 20,
                x: 50,
                y: container.offsetHeight - 150
            });
            
            // å³ä¾§å¹³å°
            platforms.push({
                element: createPhysicsElement('platform', 200, 20, container.offsetWidth - 250, container.offsetHeight - 220),
                type: 'platform',
                width: 200,
                height: 20,
                x: container.offsetWidth - 250,
                y: container.offsetHeight - 220
            });
            
            // åˆå§‹æ·»åŠ å‡ ä¸ªçƒä½“
            for (let i = 0; i < 3; i++) {
                addBall();
            }
            
            // å¯åŠ¨åŠ¨ç”»å¾ªç¯
            animatePhysics();
        }
        
        function createPhysicsElement(type, width, height, x, y) {
            const element = document.createElement('div');
            element.className = `physics-object ${type}`;
            element.style.width = `${width}px`;
            element.style.height = `${height}px`;
            element.style.left = `${x}px`;
            element.style.top = `${y}px`;
            
            if (type === 'ball') {
                element.textContent = Math.floor(Math.random() * 10) + 1;
            } else if (type === 'box') {
                element.textContent = 'â–¡';
            }
            
            document.getElementById('physicsDemo').appendChild(element);
            return element;
        }
        
        function addBall() {
            const container = document.getElementById('physicsDemo');
            const radius = 20 + Math.random() * 20;
            const x = 50 + Math.random() * (container.offsetWidth - 100);
            const y = 30;
            
            const element = createPhysicsElement('ball', radius * 2, radius * 2, x - radius, y - radius);
            
            physicsObjects.push({
                element: element,
                type: 'ball',
                radius: radius,
                x: x,
                y: y,
                velocityX: (Math.random() - 0.5) * 4,
                velocityY: 0,
                gravity: 0.3,
                friction: 0.99,
                restitution: 0.7
            });
        }
        
        function addBox() {
            const container = document.getElementById('physicsDemo');
            const size = 30 + Math.random() * 30;
            const x = 50 + Math.random() * (container.offsetWidth - 100);
            const y = 30;
            
            const element = createPhysicsElement('box', size, size, x - size/2, y - size/2);
            
            physicsObjects.push({
                element: element,
                type: 'box',
                width: size,
                height: size,
                x: x,
                y: y,
                velocityX: (Math.random() - 0.5) * 4,
                velocityY: 0,
                rotation: 0,
                angularVelocity: (Math.random() - 0.5) * 0.1,
                gravity: 0.3,
                friction: 0.98,
                restitution: 0.5
            });
        }
        
        function toggleGravity() {
            gravityEnabled = !gravityEnabled;
            const button = event.target.closest('.demo-button');
            button.innerHTML = gravityEnabled ? 
                '<i class="fas fa-weight-hanging"></i> å…³é—­é‡åŠ›' : 
                '<i class="fas fa-weight-hanging"></i> å¼€å¯é‡åŠ›';
        }
        
        function applyExplosion() {
            const centerX = document.getElementById('physicsDemo').offsetWidth / 2;
            const centerY = 200;
            
            physicsObjects.forEach(obj => {
                const dx = obj.x - centerX;
                const dy = obj.y - centerY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 200) {
                    const force = 10 / (distance / 50 + 1);
                    obj.velocityX += (dx / distance) * force;
                    obj.velocityY += (dy / distance) * force;
                }
            });
            
            // æ·»åŠ çˆ†ç‚¸è§†è§‰æ•ˆæœ
            const demoContainer = document.getElementById('physicsDemo');
            const explosion = document.createElement('div');
            explosion.style.position = 'absolute';
            explosion.style.left = `${centerX - 50}px`;
            explosion.style.top = `${centerY - 50}px`;
            explosion.style.width = '100px';
            explosion.style.height = '100px';
            explosion.style.borderRadius = '50%';
            explosion.style.background = 'radial-gradient(circle, rgba(255,100,0,0.8) 0%, rgba(255,200,0,0.6) 50%, transparent 70%)';
            explosion.style.zIndex = '10';
            explosion.style.pointerEvents = 'none';
            
            demoContainer.appendChild(explosion);
            
            // åŠ¨ç”»æ•ˆæœ
            let scale = 1;
            let opacity = 1;
            function animateExplosion() {
                scale += 0.1;
                opacity -= 0.05;
                
                explosion.style.transform = `scale(${scale})`;
                explosion.style.opacity = opacity;
                
                if (opacity > 0) {
                    requestAnimationFrame(animateExplosion);
                } else {
                    explosion.remove();
                }
            }
            
            animateExplosion();
        }
        
        function resetDemo() {
            physicsObjects.forEach(obj => {
                obj.element.remove();
            });
            
            physicsObjects = [];
            
            // é‡æ–°åˆå§‹åŒ–
            setTimeout(() => {
                initPhysicsDemo();
            }, 100);
        }
        
        function animatePhysics() {
            const container = document.getElementById('physicsDemo');
            const containerWidth = container.offsetWidth;
            const containerHeight = container.offsetHeight;
            
            physicsObjects.forEach(obj => {
                // åº”ç”¨é‡åŠ›
                if (gravityEnabled) {
                    obj.velocityY += obj.gravity;
                }
                
                // åº”ç”¨é€Ÿåº¦
                obj.x += obj.velocityX;
                obj.y += obj.velocityY;
                
                // åº”ç”¨è§’é€Ÿåº¦ï¼ˆä»…æ–¹å—ï¼‰
                if (obj.angularVelocity) {
                    obj.rotation += obj.angularVelocity;
                    obj.element.style.transform = `rotate(${obj.rotation}rad)`;
                }
                
                // è¾¹ç•Œç¢°æ’æ£€æµ‹
                if (obj.type === 'ball') {
                    // çƒä½“è¾¹ç•Œç¢°æ’
                    if (obj.x - obj.radius < 0) {
                        obj.x = obj.radius;
                        obj.velocityX = Math.abs(obj.velocityX) * obj.restitution;
                    } else if (obj.x + obj.radius > containerWidth) {
                        obj.x = containerWidth - obj.radius;
                        obj.velocityX = -Math.abs(obj.velocityX) * obj.restitution;
                    }
                    
                    if (obj.y - obj.radius < 0) {
                        obj.y = obj.radius;
                        obj.velocityY = Math.abs(obj.velocityY) * obj.restitution;
                    } else if (obj.y + obj.radius > containerHeight) {
                        obj.y = containerHeight - obj.radius;
                        obj.velocityY = -Math.abs(obj.velocityY) * obj.restitution;
                    }
                } else if (obj.type === 'box') {
                    // æ–¹å—è¾¹ç•Œç¢°æ’
                    const halfWidth = obj.width / 2;
                    const halfHeight = obj.height / 2;
                    
                    if (obj.x - halfWidth < 0) {
                        obj.x = halfWidth;
                        obj.velocityX = Math.abs(obj.velocityX) * obj.restitution;
                    } else if (obj.x + halfWidth > containerWidth) {
                        obj.x = containerWidth - halfWidth;
                        obj.velocityX = -Math.abs(obj.velocityX) * obj.restitution;
                    }
                    
                    if (obj.y - halfHeight < 0) {
                        obj.y = halfHeight;
                        obj.velocityY = Math.abs(obj.velocityY) * obj.restitution;
                    } else if (obj.y + halfHeight > containerHeight) {
                        obj.y = containerHeight - halfHeight;
                        obj.velocityY = -Math.abs(obj.velocityY) * obj.restitution;
                    }
                }
                
                // å¹³å°ç¢°æ’æ£€æµ‹
                platforms.forEach(platform => {
                    if (obj.type === 'ball') {
                        // çƒä½“ä¸å¹³å°ç¢°æ’
                        const closestX = Math.max(platform.x, Math.min(obj.x, platform.x + platform.width));
                        const closestY = Math.max(platform.y, Math.min(obj.y, platform.y + platform.height));
                        
                        const distanceX = obj.x - closestX;
                        const distanceY = obj.y - closestY;
                        const distanceSquared = distanceX * distanceX + distanceY * distanceY;
                        
                        if (distanceSquared < obj.radius * obj.radius) {
                            // è®¡ç®—ç¢°æ’æ³•çº¿
                            const distance = Math.sqrt(distanceSquared);
                            const normalX = distanceX / distance;
                            const normalY = distanceY / distance;
                            
                            // å°†çƒä½“æ¨å‡ºå¹³å°
                            const overlap = obj.radius - distance;
                            obj.x += normalX * overlap;
                            obj.y += normalY * overlap;
                            
                            // è®¡ç®—åå°„
                            const dotProduct = obj.velocityX * normalX + obj.velocityY * normalY;
                            obj.velocityX = (obj.velocityX - 2 * dotProduct * normalX) * obj.restitution;
                            obj.velocityY = (obj.velocityY - 2 * dotProduct * normalY) * obj.restitution;
                        }
                    }
                });
                
                // åº”ç”¨æ‘©æ“¦
                obj.velocityX *= obj.friction;
                obj.velocityY *= obj.friction;
                if (obj.angularVelocity) {
                    obj.angularVelocity *= obj.friction;
                }
                
                // æ›´æ–°å…ƒç´ ä½ç½®
                if (obj.type === 'ball') {
                    obj.element.style.left = `${obj.x - obj.radius}px`;
                    obj.element.style.top = `${obj.y - obj.radius}px`;
                } else if (obj.type === 'box') {
                    obj.element.style.left = `${obj.x - obj.width/2}px`;
                    obj.element.style.top = `${obj.y - obj.height/2}px`;
                }
            });
            
            // ç‰©ä½“é—´ç¢°æ’æ£€æµ‹ï¼ˆç®€åŒ–ç‰ˆï¼‰
            for (let i = 0; i < physicsObjects.length; i++) {
                for (let j = i + 1; j < physicsObjects.length; j++) {
                    const objA = physicsObjects[i];
                    const objB = physicsObjects[j];
                    
                    if (objA.type === 'ball' && objB.type === 'ball') {
                        // çƒä½“ä¸çƒä½“ç¢°æ’
                        const dx = objB.x - objA.x;
                        const dy = objB.y - objA.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        const minDistance = objA.radius + objB.radius;
                        
                        if (distance < minDistance && distance > 0) {
                            // ç¢°æ’æ³•çº¿
                            const normalX = dx / distance;
                            const normalY = dy / distance;
                            
                            // å°†çƒä½“åˆ†å¼€
                            const overlap = minDistance - distance;
                            objA.x -= normalX * overlap * 0.5;
                            objA.y -= normalY * overlap * 0.5;
                            objB.x += normalX * overlap * 0.5;
                            objB.y += normalY * overlap * 0.5;
                            
                            // è®¡ç®—ç›¸å¯¹é€Ÿåº¦
                            const relativeVelocityX = objB.velocityX - objA.velocityX;
                            const relativeVelocityY = objB.velocityY - objA.velocityY;
                            
                            // è®¡ç®—ç›¸å¯¹é€Ÿåº¦åœ¨æ³•çº¿ä¸Šçš„æŠ•å½±
                            const velocityAlongNormal = relativeVelocityX * normalX + relativeVelocityY * normalY;
                            
                            // å¦‚æœç‰©ä½“æ­£åœ¨åˆ†ç¦»ï¼Œè·³è¿‡
                            if (velocityAlongNormal > 0) continue;
                            
                            // è®¡ç®—æ¢å¤ç³»æ•°ï¼ˆä½¿ç”¨ä¸¤ä¸ªç‰©ä½“æ¢å¤ç³»æ•°çš„å¹³å‡å€¼ï¼‰
                            const restitution = (objA.restitution + objB.restitution) / 2;
                            
                            // è®¡ç®—å†²é‡æ ‡é‡
                            let impulseScalar = -(1 + restitution) * velocityAlongNormal;
                            impulseScalar /= 2; // å‡è®¾è´¨é‡ç›¸ç­‰
                            
                            // åº”ç”¨å†²é‡
                            objA.velocityX -= impulseScalar * normalX;
                            objA.velocityY -= impulseScalar * normalY;
                            objB.velocityX += impulseScalar * normalX;
                            objB.velocityY += impulseScalar * normalY;
                        }
                    }
                }
            }
            
            animationId = requestAnimationFrame(animatePhysics);
        }
        
        /* ==================== ç²’å­ç³»ç»Ÿæ¼”ç¤º ==================== */
        function startParticleDemo(containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            // åˆ›å»ºç”»å¸ƒ
            const canvas = document.createElement('canvas');
            canvas.width = container.offsetWidth;
            canvas.height = container.offsetHeight;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            
            // åˆ›å»ºç²’å­
            const particles = [];
            const particleCount = 150;
            
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: 2 + Math.random() * 4,
                    speedX: (Math.random() - 0.5) * 2,
                    speedY: (Math.random() - 0.5) * 2,
                    color: `hsl(${Math.random() * 60 + 180}, 100%, 70%)`,
                    life: 1,
                    decay: 0.002 + Math.random() * 0.005
                });
            }
            
            // åŠ¨ç”»å¾ªç¯
            let particleAnimationId;
            
            function animateParticles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ç»˜åˆ¶ç²’å­
                particles.forEach(particle => {
                    // æ›´æ–°ä½ç½®
                    particle.x += particle.speedX;
                    particle.y += particle.speedY;
                    
                    // è¾¹ç•Œæ£€æŸ¥
                    if (particle.x < 0 || particle.x > canvas.width) particle.speedX *= -1;
                    if (particle.y < 0 || particle.y > canvas.height) particle.speedY *= -1;
                    
                    // æ›´æ–°ç”Ÿå‘½å‘¨æœŸ
                    particle.life -= particle.decay;
                    
                    // ç»˜åˆ¶ç²’å­
                    ctx.globalAlpha = particle.life;
                    ctx.fillStyle = particle.color;
                    ctx.beginPath();
                    ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // å¦‚æœç²’å­ç”Ÿå‘½å‘¨æœŸç»“æŸï¼Œé‡ç½®
                    if (particle.life <= 0) {
                        particle.x = Math.random() * canvas.width;
                        particle.y = Math.random() * canvas.height;
                        particle.life = 1;
                    }
                });
                
                // ç»˜åˆ¶è¿æ¥çº¿
                ctx.globalAlpha = 0.3;
                ctx.strokeStyle = 'rgba(100, 200, 255, 0.5)';
                ctx.lineWidth = 1;
                
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const p1 = particles[i];
                        const p2 = particles[j];
                        
                        const dx = p1.x - p2.x;
                        const dy = p1.y - p2.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 80) {
                            ctx.beginPath();
                            ctx.moveTo(p1.x, p1.y);
                            ctx.lineTo(p2.x, p2.y);
                            ctx.stroke();
                        }
                    }
                }
                
                particleAnimationId = requestAnimationFrame(animateParticles);
            }
            
            animateParticles();
            
            // 5ç§’ååœæ­¢
            setTimeout(() => {
                cancelAnimationFrame(particleAnimationId);
                container.innerHTML = '';
                const demoText = document.createElement('div');
                demoText.style.color = 'white';
                demoText.style.fontSize = '1.2rem';
                demoText.innerHTML = '<i class="fas fa-sync-alt"></i> ç‚¹å‡»é‡æ–°æ¼”ç¤º';
                container.appendChild(demoText);
            }, 5000);
        }
        
        /* ==================== åŠ¨ç”»æ¼”ç¤ºåŠŸèƒ½ ==================== */
        let animationObjects = [];
        let animationRunning = false;
        
        function initAnimationDemo() {
            // åˆå§‹åŒ–åŠ¨ç”»æ¼”ç¤ºå®¹å™¨
            const container = document.getElementById('animationDemo');
            container.innerHTML = '';
        }
        
        function startAnimationDemo() {
            if (animationRunning) return;
            
            animationRunning = true;
            const container = document.getElementById('animationDemo');
            container.innerHTML = '';
            
            // åˆ›å»ºå¤šä¸ªåŠ¨ç”»å¯¹è±¡
            for (let i = 0; i < 8; i++) {
                const size = 20 + Math.random() * 30;
                const x = 50 + Math.random() * (container.offsetWidth - 100);
                const y = 50 + Math.random() * (container.offsetHeight - 100);
                
                const element = document.createElement('div');
                element.className = 'animation-object';
                element.style.width = `${size}px`;
                element.style.height = `${size}px`;
                element.style.left = `${x - size/2}px`;
                element.style.top = `${y - size/2}px`;
                element.textContent = i + 1;
                
                container.appendChild(element);
                
                animationObjects.push({
                    element: element,
                    x: x,
                    y: y,
                    size: size,
                    velocityX: (Math.random() - 0.5) * 4,
                    velocityY: (Math.random() - 0.5) * 4,
                    gravity: 0.1,
                    friction: 0.995
                });
            }
            
            // å¯åŠ¨åŠ¨ç”»
            animateDemo();
        }
        
        function animateDemo() {
            if (!animationRunning) return;
            
            const container = document.getElementById('animationDemo');
            const containerWidth = container.offsetWidth;
            const containerHeight = container.offsetHeight;
            
            animationObjects.forEach(obj => {
                // åº”ç”¨ç‰©ç†
                obj.velocityY += obj.gravity;
                obj.x += obj.velocityX;
                obj.y += obj.velocityY;
                
                // è¾¹ç•Œç¢°æ’
                if (obj.x - obj.size/2 < 0) {
                    obj.x = obj.size/2;
                    obj.velocityX = Math.abs(obj.velocityX) * 0.8;
                } else if (obj.x + obj.size/2 > containerWidth) {
                    obj.x = containerWidth - obj.size/2;
                    obj.velocityX = -Math.abs(obj.velocityX) * 0.8;
                }
                
                if (obj.y - obj.size/2 < 0) {
                    obj.y = obj.size/2;
                    obj.velocityY = Math.abs(obj.velocityY) * 0.8;
                } else if (obj.y + obj.size/2 > containerHeight) {
                    obj.y = containerHeight - obj.size/2;
                    obj.velocityY = -Math.abs(obj.velocityY) * 0.8;
                }
                
                // åº”ç”¨æ‘©æ“¦
                obj.velocityX *= obj.friction;
                obj.velocityY *= obj.friction;
                
                // æ›´æ–°ä½ç½®
                obj.element.style.left = `${obj.x - obj.size/2}px`;
                obj.element.style.top = `${obj.y - obj.size/2}px`;
                
                // æ·»åŠ æ—‹è½¬æ•ˆæœ
                const rotation = (Date.now() / 1000) * 180 + obj.x + obj.y;
                obj.element.style.transform = `rotate(${rotation}deg)`;
                
                // è„‰åŠ¨æ•ˆæœ
                const pulse = Math.sin(Date.now() / 500 + obj.x * 0.01) * 0.2 + 1;
                obj.element.style.transform += ` scale(${pulse})`;
            });
            
            requestAnimationFrame(animateDemo);
        }
        
        function addRagdoll() {
            if (!animationRunning) startAnimationDemo();
            
            const container = document.getElementById('animationDemo');
            
            // åˆ›å»ºç®€å•çš„å¸ƒå¨ƒå¨ƒç»“æ„
            const centerX = 100 + Math.random() * (container.offsetWidth - 200);
            const centerY = 100;
            
            // åˆ›å»ºèº«ä½“å„éƒ¨åˆ†
            const parts = ['å¤´', 'èº¯å¹²', 'å·¦è‡‚', 'å³è‡‚', 'å·¦è…¿', 'å³è…¿'];
            
            parts.forEach((part, index) => {
                const size = 20 + (part === 'èº¯å¹²' ? 10 : 0);
                const angle = (index / parts.length) * Math.PI * 2;
                const distance = part === 'èº¯å¹²' ? 0 : 40;
                
                const x = centerX + Math.cos(angle) * distance;
                const y = centerY + Math.sin(angle) * distance + (part === 'èº¯å¹²' ? 0 : 30);
                
                const element = document.createElement('div');
                element.className = 'animation-object';
                element.style.width = `${size}px`;
                element.style.height = `${size}px`;
                element.style.left = `${x - size/2}px`;
                element.style.top = `${y - size/2}px`;
                element.textContent = part;
                element.style.background = `linear-gradient(135deg, ${index % 2 === 0 ? '#ff9e00' : '#ff6f00'}, #ff3d00)`;
                
                container.appendChild(element);
                
                animationObjects.push({
                    element: element,
                    x: x,
                    y: y,
                    size: size,
                    velocityX: (Math.random() - 0.5) * 6,
                    velocityY: (Math.random() - 0.5) * 6,
                    gravity: 0.2,
                    friction: 0.99,
                    part: part
                });
            });
        }
        
        function addSoftBody() {
            if (!animationRunning) startAnimationDemo();
            
            const container = document.getElementById('animationDemo');
            const centerX = 100 + Math.random() * (container.offsetWidth - 200);
            const centerY = 100;
            const pointCount = 12;
            const radius = 40;
            
            // åˆ›å»ºè½¯ä½“ç‚¹
            for (let i = 0; i < pointCount; i++) {
                const angle = (i / pointCount) * Math.PI * 2;
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;
                const size = 12;
                
                const element = document.createElement('div');
                element.className = 'animation-object';
                element.style.width = `${size}px`;
                element.style.height = `${size}px`;
                element.style.left = `${x - size/2}px`;
                element.style.top = `${y - size/2}px`;
                element.textContent = 'â€¢';
                element.style.background = 'linear-gradient(135deg, #00b4d8, #0096c7)';
                element.style.fontSize = '24px';
                element.style.display = 'flex';
                element.style.alignItems = 'center';
                element.style.justifyContent = 'center';
                
                container.appendChild(element);
                
                animationObjects.push({
                    element: element,
                    x: x,
                    y: y,
                    size: size,
                    velocityX: (Math.random() - 0.5) * 3,
                    velocityY: (Math.random() - 0.5) * 3,
                    gravity: 0.15,
                    friction: 0.995,
                    originalX: x,
                    originalY: y,
                    stiffness: 0.05
                });
            }
        }
        
        function resetAnimationDemo() {
            animationRunning = false;
            animationObjects = [];
            initAnimationDemo();
        }
        
        /* ==================== é€šç”¨åŠŸèƒ½ ==================== */
        // å¤åˆ¶ä»£ç åŠŸèƒ½
        function copyCode(codeId) {
            const codeElement = document.getElementById(codeId);
            const textToCopy = codeElement.textContent;
            
            navigator.clipboard.writeText(textToCopy).then(() => {
                const button = event.target.closest('.copy-button');
                const originalHTML = button.innerHTML;
                
                button.innerHTML = '<i class="fas fa-check"></i> å·²å¤åˆ¶';
                button.style.backgroundColor = 'rgba(76, 175, 80, 0.2)';
                button.style.color = '#4CAF50';
                
                setTimeout(() => {
                    button.innerHTML = originalHTML;
                    button.style.backgroundColor = '';
                    button.style.color = '';
                }, 2000);
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥: ', err);
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬å¤åˆ¶');
            });
        }
        
        // å¹³æ»‘æ»šåŠ¨åˆ°é”šç‚¹
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    e.preventDefault();
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        // é¡µé¢å¸è½½æ—¶æ¸…ç†åŠ¨ç”»
        window.addEventListener('beforeunload', function() {
            if (animationId) cancelAnimationFrame(animationId);
        });
    </script>
</body>
</html>
